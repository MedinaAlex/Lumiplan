Pré-requis :
	

Action
	Accéder à l’interface web :
 
Saisir l’adresse : http://192.168.1.93/siv

Résultat attendu :
	La console SIV est accessible en HTTP

Pièces jointes :
	Non
Action
	Authentification :
 
Se connecter en tant qu'administrateur (login : admin)

Résultat attendu :
	Les modules Panneaux, Messages et Analyse sont présents.

Pièces jointes :
	Non
Action
	Authentification :
 
Se connecter en tant qu'un utilisateur de maintenance (login : maint)

Résultat attendu :
	Les modules Panneaux et Analyse sont présents. Le module Message n'est pas présent.

Pièces jointes :
	Non
Action
	Authentification :
 
Se connecter en tant qu'un exploitant (login : exploit)

Résultat attendu :
	Les modules Panneaux et Message sont présents. Le module Analyse n'est pas présent.

Pièces jointes :
	Non
Action
	Rafraichir l’interface web :
 
Visualiser l’icône Rafraichir dans la partie haute à droite de l’interface web.
Rafraichir.

Résultat attendu :
	Un rafraichissement des données visualisées dans l’iHM est effectué.  
 
Le rafraichissement n’est pas disponible sur l’onglet Analyse.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Vérifier la date et l’heure sur les bornes
Vérifier l’heure sur le serveur SIV avec la commande « date » 

Résultat attendu :
	L’heure affichée sur la borne est la même que celle sur le serveur.

Pièces jointes :
	Non
Action
	Vérifier la date et l’heure sur le serveur
Vérifier que le NTP est en place sur le serveur SIV
 
Utiliser la commande : service ntpd status ou ntpq -c peers
Et vérifier la configuration du service ntpd dans le fichier /etc/ntp.conf

Résultat attendu :
	Le serveur est mis à l’heure sur la même heure que celle du serveur SAE
 
Le NTP mis en place est le suivant : X.X.X.X

Pièces jointes :
	Non
Pré-requis :
	

Action
	Visualiser les panneaux :
 
Aller dans l’onglet « Panneaux »

Résultat attendu :
	La liste des panneaux est présente. 9 panneaux sont présents.
Pour chaque panneau est présenté :
Son numéro
Son type
Une description
Ses états d’alimentation et d’affichage
Ses défauts
Son statut d’interrogation
Son numéro de version logiciel
Son dernier état de mise à jour de version logiciel

Pièces jointes :
	Non
Action
	Éteindre un panneau :
Sélectionner un panneau.
Dans la colonne Action sélectionner « Eteindre » puis valider.

Résultat attendu :
	Un message de confirmation apparaît.
Après confirmation : Le panneau s'éteint (écran noir)

Pièces jointes :
	Non
Action
	Interroger un panneau :
Sélectionner le panneau précédemment éteint
Dans la colonne Action : Sélectionner « Interroger », puis valider

Résultat attendu :
	Un message de confirmation apparaît.
Après confirmation :
Le panneau apparaît quelques secondes plus tard comme éteint dans l'onglet des panneaux.
Sur l’interface web est visualisé : (branché, ethernet, veille)

Pièces jointes :
	Non
Action
	Allumer un panneau :
Sélectionner un panneau.
Dans la colonne colonne Action sélectionner « Allumer » puis valider.

Résultat attendu :
	Un message de confirmation apparaît.
       
Après confirmation : le panneau s'allume.

Pièces jointes :
	Non
Action
	Interroger un panneau :
Sélectionner le panneau précédemment allumé.
Dans la colonne Action sélectionner « Interroger », puis valider.

Résultat attendu :
	Un  message de confirmation apparaît.
 
Après confirmation :
Le panneau apparaît quelques secondes plus tard comme allumé dans l'onglet des panneaux.
Sur l’interface web est visualisé : (branché, ethernet, normal)

Pièces jointes :
	Non
Action
	Espionner un panneau :
Sélectionner un panneau.
Dans la colonne Action sélectionner « Espionner ».
 
S'asurer que des temps et un message ont été envoyés au préalable sur le panneau avec le SAE.

Résultat attendu :
	Une fenêtre s’ouvre et affiche les informations transmises au panneau.
 
 
Les messages et temps d’attente envoyés apparaissent dans la fenêtre d‘espionnage.

Pièces jointes :
	Non
Action
	Effacer les messages :
Sélectionner un panneau diffusant de la messagerie.
Dans la colonne Action sélectionner « Effacer les messages ».

Résultat attendu :
	Un message de confirmation apparaît.
 
Après confirmation :
Le panneau ne diffuse plus aucun message jusqu'à leur réémission.
Les messages envoyés n’apparaissent plus dans l’espionnage.

Pièces jointes :
	Non
Action
	Redémarrer un panneau :
Sélectionner un panneau.
Dans la colonne Action sélectionner « Redémarrer » puis valider.
 
Cette commande peut prendre jusqu’à 5 minutes.

Résultat attendu :
	Un message de confirmation apparaît.
 
Après confirmation le panneau redémarre.

Pièces jointes :
	Non
Action
	Réinitialiser un panneau :
Sélectionner un panneau
Dans la colonne Action sélectionner « Réinitialiser » puis valider.
Cette commande peut prendre jusqu’à 5 minutes.

Résultat attendu :
	Un message de confirmation apparaît.
 
Après confirmation : le panneau redémarre avec les paramètres que lui renvoie le serveur.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Visualiser les messages :
Aller dans l’onglet Message, Section Bibliothèque.
Sélectionner un message et observer ses propriétés.

Résultat attendu :
	La bibliothèque de messages présente les messages. Pour chaque message est présenté :
Son titre
Le nombre de diffusion dans laquelle ce message est référencé
Le message et ses libellés apparaissent dans la zone d'édition.
Le contenu des messages lignes est disponible dans l’onglet « 1*37 »
Le contenu des messages généraux est disponible dans l’onglet « 1*100 »

Pièces jointes :
	Non
Action
	Trier les messages :
La liste des messages peut être ordonnée par titre,
ou par nombre de références de diffusion.

Résultat attendu :
	La liste présentée est conforme au tri demandé.

Pièces jointes :
	Non
Action
	Rechercher les messages :
Effectuer une recherche sur une partie du titre du message

Résultat attendu :
	La liste ne présente que les messages recherchés

Pièces jointes :
	Non
Action
	Supprimer un message référencé :
Sélectionner un message utilisé dans une diffusion.
 
Cliquer sur le bouton Supprimer puis valider.

Résultat attendu :
	Les cases à cocher n'apparaissent pas pour les messages référencés (Référence supérieur à 0)

Pièces jointes :
	Non
Action
	Supprimer un message :
Sélectionner un message sans référence en cliquant sur la case à cocher correspondante.
 
Cliquer sur le bouton Supprimer puis valider.

Résultat attendu :
	Les  cases à cocher n'apparaissent pas pour les messages référencés.
 
Un message de confirmation apparaît. Après confirmation, le message est supprimé et n'apparaît plus dans la liste des messages de la bibliothèque.

Pièces jointes :
	Non
Action
	Supprimer tous les messages :
Sélectionner les messages sans référence en cochant la case à cocher en entête de colonne.
 
Cliquer sur le bouton Supprimer puis valider.

Résultat attendu :
	Les  cases à cocher n'apparaissent pas pour les messages référencés. Seuls les messages sans référence de la page visualisée sont sélectionnés.
 
Un message de confirmation apparaît. Après confirmation, les messages sont supprimés et n'apparaissent plus dans
la liste des messages de la bibliothèque.

Pièces jointes :
	Non
Action
	Visualiser les diffusions de messages :
Aller dans l’onglet Message, Section Diffusion.
Sélectionner une diffusion de message et observer ses propriétés.

Résultat attendu :
	Pour chaque diffusion de message est présenté dans la liste :
Le titre du message.
Sa période de validité.
Son créneau horaire quotidien de diffusion.
Les afficheurs ou lignes affectés.
Le message et ses critères de diffusion apparaissent dans la zone de droite. Dans la liste des afficheurs, ceux concernés sont  indiqués.

Pièces jointes :
	Non
Action
	Rechercher une diffusion
Entrer un mot clé : nom d’afficheur, de ligne ou titre de message.

Résultat attendu :
	Seules les diffusions ayant un lien avec la saisie apparaissent au fur et à mesure dans la liste des diffusions.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Visualisation générale :
Cliquer sur l'onglet d'analyse

Résultat attendu :
	La liste des défauts est présentée ainsi :
Description du panneau ou du module concerné,
Numéro,
Libellé du défaut,
Date et heure d’apparition,
Date et heure de disparition
La durée du défaut en minute

Pièces jointes :
	Non
Action
	Période :
Indiquer une période puis cliquer sur l’icône en forme de loupe (« Rechercher »)

Résultat attendu :
	Filtre la sélection sur une période donnée pour tous les afficheurs

Pièces jointes :
	Non
Action
	Afficheurs :
Choisir un afficheur puis cliquer sur l’icône en forme de loupe (« Rechercher »)

Résultat attendu :
	La liste des défauts de l'afficheur est présentée

Pièces jointes :
	Non
Action
	Historique :
Redémarrer un afficheur
Sélectionner la semaine en cours et l’afficheur

Résultat attendu :
	La période de redémarrage correspond au défaut de transmission.
La durée est à zéro tant que l’erreur est en cours.

Pièces jointes :
	Non
Action
	Tri :
Cliquer sur l'entête de chacune des colonnes dans la liste des défauts

Résultat attendu :
	Les données sont triées selon la colonne demandée.

Pièces jointes :
	Non
Action
	Graphique :
Sur chacun des tests précédents, une représentation graphique reprend les données du tableau.

Résultat attendu :
	Chaque courbe représente une série de données attachées à un afficheur :
En abscisse le temps ; l’échelle est fonction de la période retenue
En ordonnées la durée cumulée sur l’unité de temps correspondant  à la période, de temps de présence du défaut, en heure
 

Pièces jointes :
	Non
Pré-requis :
	

Action
	Présence du fichier de quai :
Supprimer du répertoire /u/siv/quai le fichier quai.csv.

Résultat attendu :
	Le système détecte l'absence du fichier d'import des données de quai. Les données de quai précédentes ne sont pas effacées de la base de données.
Dans les logs /u/siv/logs/siv.log un log indique : 2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.impl.ImportQuai  - Aucun import de fichier concernant les quais.

Pièces jointes :
	Non
Action
	Détection du fichier de quai: 
Déposer dans le répertoire /u/siv/quai un fichier quai.csv vide.

Résultat attendu :
	Le système détecte la présence du fichier d'import des données de quai. Les données de quai précédentes  sont effacées de la base de données. Le fichier doit contenir toutes les données de la table des quais à chaque import. 
 
Dans les logs /u/siv/logs/siv.log un log indique : 2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.impl.ImportQuai  - Nouvel import pour les quais pris en compte.
 

Pièces jointes :
	Non
Action
	Import du fichier de quai : 
Déposer dans le répertoire /u/siv/quai un fichier quai.csv au format :<Identification_ligne>,<Destination>,<Quai>,<panneau>.
 
Le champ <panneau> est facultatif. S'il n'est pas présent le quai est affecté à la ligne et à la destination sur tous les panneaux. 

Résultat attendu :
	Le système détecte la présence du fichier d'import des données de quai. Les données de quai sont intégrées dans la base de données.
 
Dans les logs /u/siv/logs/siv.log il est indiqué :
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.impl.ImportQuai  - <ligne du fichier>
2015-XX-XX XX:XX:XX.XXX [Thread-X]DEBUG com.lumiplan.siv.impl.ImportQuai  - Nouvel import pour les quais pris en compte.
 

Pièces jointes :
	Non
Action
	Vérification du format du fichier de quai : 
Déposer dans le répertoire /u/siv/quai un fichier quai.csv avec un format incorrect.

Résultat attendu :
	Le système détecte la présence du fichier d'import des données de quai. Les données de quai précédentes ne sont pas modifiées dans la base de données.
 
Dans les logs /u/siv/logs/siv.log il est indiqué : 
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.impl.ImportQuai  - <ligne du fichier>
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.impl.ImportQuai  - Erreur sur la ligne : <ligne du fichier> : Données insuffisantes
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.impl.ImportQuai  - Echec lors de l'import pour les quais.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Présence des données topologiques et des temps théoriques :
Supprimer du répertoire /home/neptune les fichiers présents. 
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte l'absence de fichiers pour les lignes concernées. Les données théoriques et topologiques précédement importées pour ces lignes ne sont pas effacées de la base de données.

Pièces jointes :
	Non
Action
	Présence des données topologiques et des temps théoriques :
Déposer dans le répertoire /home/neptune un fichier exportNeptune_<identification de la ligne> vide. 
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte l'absence de fichiers pour la ligne concernée.
Les données théoriques et topologiques précédement importées pour cette ligne sont effacées de la base de données.
 
Une alarme dans l'IHM indique l'absence de données théorique pour cette ligne.

Pièces jointes :
	Non
Action
	Import des données topologiques et des temps théoriques :
Déposer dans le répertoire /home/neptune un fichier exportNeptune_<identification de la ligne>  qui respecte le format spécifié dans le document de spécification d'interface SAE.
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte la présence d'un fichier créé ou modifié et lance la procédure d'intégration du fihcier dans la base de données.
 
Dans le fichier de log /u/siv/logs/siv.log il est indiqué : 
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - ---------------------------
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Theoretic timetable will be retrieved for this day now.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - XX outdated timetable have been removed.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Found line XX
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.times.NeptuneManager  - Found XX stop points for line 100
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.times.NeptuneManager  - Found XX journey patterns for line 100
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.times.NeptuneManager  - Found XX timetables for line 100
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Theoretic data have been retrieved.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - --------------------------

Pièces jointes :
	Non
Action
	Vérification du format d'import des données topologiques et des temps théoriques : 
Déposer dans le répertoire /home/neptune un fichier exportNeptune_<identification de la ligne> avec un format incorrect.
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte la présence d'un fichier créé ou modifié et lance la procédure d'intégration du fihcier dans la base de données.
 
Le système détecte l'erreur dans le format du fichier. Les données théoriques et topologiques précédement importées pour cette ligne ne sont pas modifiées dans la base de données.
 
Dans le fihcier de log /u/siv/logs/siv.log il est indiqué : 
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - ---------------------------
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Theoretic timetable will be retrieved for this day now.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - 0 outdated timetable have been removed.
2015-XX-XX XX:XX:XX.XXX [Thread-X]  ERROR com.lumiplan.siv.times.NeptuneManager  - <error description>.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - ---------------------------

Pièces jointes :
	Non
Pré-requis :
	

Action
	Présence des données topologiques :
Supprimer du répertoire /home/neptune/topologie les fichiers présents. 
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte l'absence de fichiers pour les lignes concernées. Les données topologiques précédement importées pour ces lignes ne sont pas effacées de la base de données.

Pièces jointes :
	Non
Action
	Présence des données topologiques  :
Déposer dans le répertoire /home/neptune/topologie un fichier exportNeptune_<identification de la ligne> vide. 
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte l'absence de fichiers pour la ligne concernée.
Les données topologiques précédement importées pour cette ligne sont effacées de la base de données.

Pièces jointes :
	Non
Action
	Import des données topologiques :
Déposer dans le répertoire /home/neptune/topologie un fichier exportNeptune_<identification de la ligne>  qui respecte le format spécifié dans le document de spécification d'interface SAE.
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte la présence d'un fichier créé ou modifié et lance la procédure d'intégration du fihcier dans la base de données.
 
Dans le fichier de log /u/siv/logs/siv.log il est indiqué : 
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - ---------------------------
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Topologic will be retrieved for this day now.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Found line XX
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.times.NeptuneManager  - Found XX stop points for line 100
2015-XX-XX XX:XX:XX.XXX [Thread-X] DEBUG com.lumiplan.siv.times.NeptuneManager  - Found XX journey patterns for line 100
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Topologic data have been retrieved.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - --------------------------

Pièces jointes :
	Non
Action
	Vérification du format d'import des données topologiques : 
Déposer dans le répertoire /home/neptune/topologie un fichier exportNeptune_<identification de la ligne> avec un format incorrect.
Possibilité de le faire par FTP en utilisant le compte neptune.
 
Attendre 1 minute.

Résultat attendu :
	Le système détecte la présence d'un fichier créé ou modifié et lance la procédure d'intégration du fihcier dans la base de données.
 
Le système détecte l'erreur dans le format du fichier. Les données topologiques précédement importées pour cette ligne ne sont pas modifiées dans la base de données.
 
Dans le fihcier de log /u/siv/logs/siv.log il est indiqué : 
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - ---------------------------
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - Topologic will be retrieved for this day now.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - 0 outdated timetable have been removed.
2015-XX-XX XX:XX:XX.XXX [Thread-X]  ERROR com.lumiplan.siv.times.NeptuneManager  - <error description>.
2015-XX-XX XX:XX:XX.XXX [Thread-X] INFO  com.lumiplan.siv.times.NeptuneManager  - ---------------------------

Pièces jointes :
	Non
Pré-requis :
	

Action
	Déconnexion du SAE :
Se connecter à L'IHM du SIV
 
Provoquer une rupture de communication entre le SIV et le SAE.

Résultat attendu :
	Contrôler que l'alarme signalant la perte de communication avec le SAE, est bien remontée et affichée dans l’IHM.

Pièces jointes :
	Non
Action
	Connexion du SAE :
Rétablir la communication entre le SIV et le SAE.

Résultat attendu :
	Contrôler que l'alarme précédente est désactivée.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Réception de temps d’attente réel : 
S'assurer qu'un import de données topologiques des lignes en temps réel a bien été fait (Cf. Fiche 8).
Envoyer des trames de temps d’attente réel pour ces lignes en SIRI (v1.0 Profil IDF v2.2)  par le SAE SIVIK à la borne de test.

Résultat attendu :
	L’affichage des temps d’attente réel est effectif sur le panneau.
Vérifier que :
Le numéro de ligne s’affiche sur 5 caractères ou est remplacé par son logo si celui-ci est connu.
Les destinations sont affichées sur 29 caractères et correspondent aux bons numéros de lignes.
Les heures de passage sont affichées sur 5 caractères et correspondent au bons numéros de ligne et de destination.
Seul un temps d’attente par ligne / destination sur un panneau est affiché
Seul un temps d'attente compris entre 0 et 59 minutes est affiché

Pièces jointes :
	Non
Action
	Réception de temps d’attente réel : 
S'assurer qu'un import de données topologiques des lignes en temps réel a bien été fait (Cf. Fiche 8).
Modifier le paramètrage du SIV pour accepter la version 2.0 de l'interface SIRI.
Envoyer des trames de temps d’attente réel pour ces lignes en SIRI (v2.0 Profil IDF v2.4)  par le SAE SIVIK à la borne de test.

Résultat attendu :
	L’affichage des temps d’attente réel est effectif sur le panneau.
Vérifier que :
Le numéro de ligne s’affiche sur 5 caractères ou est remplacé par son logo si celui-ci est connu.
Les destinations sont affichées sur 29 caractères et correspondent aux bons numéros de lignes.
Les heures de passage sont affichées sur 5 caractères et correspondent au bons numéros de ligne et de destination.
Seul un temps d’attente par ligne / destination sur un panneau est affiché
Seul un temps d'attente compris entre 0 et 59 minutes est affiché

Pièces jointes :
	Non
Action
	Réception de temps d’attente théorique : 
S'assurer qu'un import de données topologiques et théoriques des lignes en temps théoriques a bien été fait (Cf. Fiche 7).

Résultat attendu :
	L’affichage des temps d’attente théorique est effectif sur le panneau.
Vérifier que :
Le numéro de ligne s’affiche sur 5 caractères ou est remplacé par son logo si celui-ci est connu.
Les destinations sont affichées sur 29 caractères et correspondent aux bons numéros de lignes.
Les heures de passage sont affichées sur 5 caractères et correspondent au bons numéros de ligne et de destination.
Seul un temps d’attente par ligne / destination sur un panneau est affiché
Seul un temps d'attente compris entre 0 et 59 minutes est affiché
Devant le temps d'attente un "~" permet de distinguer le temps d'attente théorique d'un temps d'attente réel.

Pièces jointes :
	Non
Action
	Vérification de l'utilisation des quais
S'assurer qu'un import de données de quai a bien été fait (Cf. Fiche 6) : Vérifier la présence et le format du fichier d'import des quais
Envoyer de nouveau des trames de temps d’attente réel pour les lignes en temps réel en SIRI par le SAE SIVIK à la borne de test.
S'assurer pour la bonne cohabitation des deux types de ligne que : Une identification de ligne est unique quelque que soit le transporteur. Le système SIV ne peut pas recevoir la même identification en temps théorique et en temps réel. 

Résultat attendu :
	L’affichage des temps d’attente réel et théoriques est effectif sur le panneau.
Vérifier que le quai s'affiche sur 2 caractères et correspond au bons numéros de ligne, de destination et de panneau que ce soit pour les lignes en théoriques ou en temps réels.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Réception de temps d’attente « Proche » : 
Envoyer avec le SAE un temps d'attente inférieur à 30 secondes.
Attendre que dans les données théorique un temps d'attente soit inférieur à 30 secondes.

Résultat attendu :
	L’affichage des temps d’attente est effectif sur le panneau.  Dans les deux cas que ce soit pour un départ théorique ou un départ réel :
L'heure de passage n'est plus indiquée.
Un message de service indique «BUS EN APPROCHE »
Le message de service s'affiche en alternance avec la destination

Pièces jointes :
	Non
Action
	Réception de temps d’attente « Dernier bus » : 
Envoyer avec le SAE un seul temps d'attente pour une ligne à l'arrêt correspondant au panenau de test.
S'assurer dans les données théoriques que le prochain temps correspond à un dernier passage pour une ligne à l'arrêt correspondant au panenau de test.

Résultat attendu :
	L’affichage des temps d’attente est effectif sur le panneau.  Dans les deux cas que ce soit pour un départ théorique ou un départ réel :
L'heure du dernier passage est indiquée.
Un message de service indique «DERNIER BUS » ou «DERNIER BUS PROCHE » si l'heure de passage est inférieur à 30 secondes.
Le message de service s'affiche en alternance avec la destination

Pièces jointes :
	Non
Action
	Réception de temps d’attente « Service terminé » : 
Ne plus envoyer avec le SAE de temps d'attente pour une ligne à l'arrêt correspondant au panneau de test.
S'assurer dans les données théoriques qu'il n'y a plus de prochain temps correspondant pour une ligne à l'arrêt correspondant au panenau de test.

Résultat attendu :
	L’affichage de la ligne / destination est effectif sur le panneau.  Dans les deux cas que ce soit pour un départ théorique ou un départ réel :
L'heure de passage n'est plus indiquée.
Un message de service indique «FIN DE SERVICE »
Le message de service s'affiche en alternance avec la destination

Pièces jointes :
	Non
Action
	Absence de réception de temps d’attente  : 
Attendre 5 minutes

Résultat attendu :
	L’affichage de la ligne / destination pour les temps qui ne sont plus reçus est supprimée.
Si aucun temps sur d’autres lignes / destinations affichées n’est plus présent, le panneau passe en affichage par défaut (« Bienvenue sur le réseau  »).

Pièces jointes :
	Non
Pré-requis :
	

Action
	Réception d’un message général : 
Créer dans le SAE un message général à destination de tous le réseau.

Résultat attendu :
	Le message général s'affiche sur la borne.
 
Le contenu du message général si supérieur à 100 caractères est tronqué.

Pièces jointes :
	Non
Action
	Modification d’un message général : 
Creer dans le SAE un message général à destination de la borne de test

Résultat attendu :
	Un seul message général peut être affiché sur le panneau. Le nouveau message panneau s'affiche sur la borne de test

Pièces jointes :
	Non
Action
	Fin de validité d’un message général : 
Creer dans le SAE un message général à destination de la borne de test avec une date de fin de fin de validité dans 5 minutes (ValidUntilTime).
Attendre 5 minutes.

Résultat attendu :
	Le message général disparait du panneau de test une fois l’heure de fin de validité atteinte.

Pièces jointes :
	Non
Action
	Réception d’un message ligne en temps théoriques : 
Créer dans le SAE un message ligne à destination d'une ligne temps théorique en cours d'affichage sur le panneau de test.

Résultat attendu :
	Le message ligne apparait sur les panneaux concernés par la ligne en question.
Le message ligne apparait en alternance avec la destination.
Le contenu du message ligne si supérieur à 29 caractères à une taille de police réduite.
Le contenu du message ligne si supérieur à 250 caractères est tronqué

Pièces jointes :
	Non
Action
	Réception d’un message ligne en temps réels : 
Créer dans le SAE un message ligne à destination d'une ligne temps réels en cours d'affichage sur le panneau de test.

Résultat attendu :
	Le message ligne apparait sur les panneaux concernés par la ligne en question.
Le message ligne apparait en alternance avec la destination.
Le contenu du message ligne si supérieur à 29 caractères à une taille de police réduite.
Le contenu du message ligne si supérieur à 250 caractères est tronqué

Pièces jointes :
	Non
Action
	Suppression d’un message ligne :
Supprimer dans le SAE les messages.

Résultat attendu :
	Les messages disparaissent des panneaux

Pièces jointes :
	Non
Pré-requis :
	

Action
	Déconnexion de la borne :
Couper l’alimentation électrique de la borne

Résultat attendu :
	Dans l’IHM du SIV la borne apparaît avec un défaut « Communication »
 
La mise à jour des défauts est faite cycliquement toutes les 2 minutes.

Pièces jointes :
	Non
Action
	Réception d’un message général : 
Creer dans le SAE un message général à destination de la borne de test
 
Attendre quelques secondes.

Résultat attendu :
	blablabla

Pièces jointes :
	Non
Action
	Connexion de la borne :
Rallumer la borne.
 

Résultat attendu :
	Dans l’IHM du SIV la borne n’apparaît plus avec un défaut « Communication ».
 
Le message général envoyé au pas 2 apparait sur la borne.

Pièces jointes :
	Non
Pré-requis :
	

Action
	Gestion du changement de journée :
Vérifier les logs au début de journée  sur le serveur OCEAN

Résultat attendu :
	Consulter dans le log /u/ocean/logs/Ocean Plugs Tethys.log que le panneau s’est bien réinitialisé le matin à 3h00 :
 
YYY-MM-DD HH:MM:SS  DEBUG [OceanPlugsTethys] [Plug=192.168.61.1 Extr=1 Mask=255.255.255.0] Modification de l'etat du plug [Plug=192.168.61.1 Extr=791 Mask=255.255.255.0] => Nouvel Etat = INITIALIZED

Pièces jointes :
	Non
Pré-requis :
	

Action
	Création d'un nouveau panneau :
A l'aide de l'utilitaire admin.sh, option 1
Remarque : L’utilitaire admin.sh est accessible sur le serveur de production dans le répertoire /u/siv. L’accès se fait avec la commande ./admin.sh
 
Souhaitez-vous acceder au menu avance des panneaux ? (o/n)
o
1 - Ajouter un panneau
2 - Supprimer un panneau
3 - Modifier la description d'un panneau
1
Merci de préciser l'identifiant du nouveau panneau :
<identifiant de panneau souhaité : un nombre non déjà utilisé entre 1 et 999 est attendu >
Merci de préciser sa description
<description du panneau>

Résultat attendu :
	La liste des panneaux et modules est présentée.
      
 
 
 
 
 
 
 
 
 
 
Le nouveau panneau est présent dans l'IHM après rafraichissement.

Pièces jointes :
	Non
Action
	Modification de la description d'un panneau :
A l'aide de l'utilitaire admin.sh, option 1
Remarque : L’utilitaire admin.sh est accessible sur le serveur de production dans le répertoire /u/siv. L’accès se fait avec la commande ./admin.sh
 
Souhaitez-vous acceder au menu avance des panneaux ? (o/n)
o
1 - Ajouter un panneau
2 - Supprimer un panneau
3 - Modifier la description d'un panneau
3
Merci de préciser l'identifiant du panneau à modifier:
<identifiant de panneau à modifier >
Merci de préciser la nouvelle description
<description du panneau>

Résultat attendu :
	La liste des panneaux et modules est présentée.
      
 
 
 
 
 
 
 
 
 
 
La description du panneau est modifiée dans l'IHM après rafraichissement.
 

Pièces jointes :
	Non
Action
	Supression d'un panneau :
A l'aide de l'utilitaire admin.sh, option 1
Remarque : L’utilitaire admin.sh est accessible sur le serveur de production dans le répertoire /u/siv. L’accès se fait avec la commande ./admin.sh
 
Souhaitez-vous acceder au menu avance des panneaux ? (o/n)
o
1 - Ajouter un panneau
2 - Supprimer un panneau
3 - Modifier la description d'un panneau
2
Merci de préciser l'identifiant du panneau à supprimer:
<identifiant de panneau à supprimer>

Résultat attendu :
	La liste des panneaux et modules est présentée.
      
 
 
 
 
 
 
 
 
 
 
Le panneau supprimé n'apparait plus dans l'IHM après rafraichissement.
 

Pièces jointes :
	Non
